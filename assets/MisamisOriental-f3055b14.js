import{u as k,r as R,j as a}from"./index-6076f4ee.js";import{C as _,A as D,p as $,a as P,b as U,L as w,P as V,c as H,d as B,e as Y,f as K,D as W}from"./Maturity-3b4c6068.js";import{D as F}from"./eReadinessSurveyData-c7ec73c1.js";const m=F;_.register(D,$,P,U,w,V,H,B);const j=N=>{const c=N.filter(d=>d!=null);return c.length?c.reduce((d,A)=>d+A,0)/c.length:0},L=N=>(N-1)/5*100,G=N=>{const c=N.filter(f=>f!=null);if(c.length===0)return 0;const d=c.length*5;return c.reduce((f,h)=>f+h,0)/d*100},q=N=>{var I,C,n,l;const c=N[0]["LGU Name"],d=m["IT Office"].find(r=>r["LGU Name"]===c),A=N.reduce((r,u)=>{const s=Array.from({length:10},(o,i)=>`Question ${i+1} DigitalSkillsAssessment`).map(o=>({question:o,score:L(Number(u[o]||0))})),e={OPTIMISM:Array.from({length:10},(o,i)=>`Optimism ${i+1}`),INNOVATIVENESS:Array.from({length:7},(o,i)=>`Innovativeness ${i+1}`),DISCOMFORT:Array.from({length:10},(o,i)=>`Discomfort ${i+1}`),INSECURITY:Array.from({length:9},(o,i)=>`Insecurity ${i+1}`)},E=Object.entries(e).map(([o,i])=>{const p=i.map(S=>({question:S,score:L(Number(u[S]||0))}));return{category:o,scores:p,average:j(p.map(S=>S.score))}});return r.digitalSkills?(r.digitalSkills.scores=r.digitalSkills.scores.map((o,i)=>({question:o.question,score:o.score+s[i].score})),r.digitalSkills.count++):r.digitalSkills={scores:s,count:1},r.techReadiness?(r.techReadiness.categories=r.techReadiness.categories.map((o,i)=>({category:o.category,scores:o.scores.map((p,S)=>({question:p.question,score:p.score+E[i].scores[S].score})),average:o.average+E[i].average})),r.techReadiness.count++):r.techReadiness={categories:E,count:1},r},{}),f=j(A.digitalSkills.scores.map(r=>r.score))/A.digitalSkills.count,h=(A.techReadiness.categories||[]).map(r=>({category:r.category,average:r.average/A.techReadiness.count})),b=((I=h.find(r=>r.category==="OPTIMISM"))==null?void 0:I.average)||0,v=((C=h.find(r=>r.category==="INNOVATIVENESS"))==null?void 0:C.average)||0,M=((n=h.find(r=>r.category==="DISCOMFORT"))==null?void 0:n.average)||0,x=((l=h.find(r=>r.category==="INSECURITY"))==null?void 0:l.average)||0,y=(b+v+(100-M)+(100-x))/4;let t=0;if(d){const r={"BASIC IT READINESS":Array.from({length:4},(s,e)=>`BASIC IT READINESS ${e+1}`),"IT GOVERNANCE":Array.from({length:3},(s,e)=>`IT GOVERNANCE FRAMEWORK & POLICIES ${e+1}`),"IT STRATEGY":Array.from({length:3},(s,e)=>`IT STRATEGY AND ALIGNMENT ${e+1}`),"IT POLICIES":Array.from({length:3},(s,e)=>`IT POLICIES AND PROCEDURES ${e+1}`),"RISK MANAGEMENT":Array.from({length:3},(s,e)=>`RISK MANAGEMENT ${e+1}`),"PERFORMANCE MEASUREMENT":Array.from({length:3},(s,e)=>`IT PERFORMANCE MEASUREMENT AND REPORTING ${e+1}`),"IT INVESTMENT MANAGEMENT":Array.from({length:3},(s,e)=>`IT INVESTMENT MANAGEMENT ${e+1}`),"VENDOR MANAGEMENT":Array.from({length:3},(s,e)=>`VENDOR MANAGEMENT ${e+1}`),"IT SECURITY":Array.from({length:3},(s,e)=>`IT SECURITY AND COMPLIANCE ${e+1}`),"ICT ORGANIZATION":Array.from({length:3},(s,e)=>`ICT Organizational Structure and Skills ${e+1}`),"AUDIT & ASSURANCE":Array.from({length:3},(s,e)=>`Audit and Assurance ${e+1}`),NETWORK:Array.from({length:2},(s,e)=>`Network Infrastructure ${e+1}`),STORAGE:Array.from({length:3},(s,e)=>`Servers and Storage ${e+1}`),VIRTUALIZATION:Array.from({length:3},(s,e)=>`Virtualization ${e+1}`),BACKUP:Array.from({length:3},(s,e)=>`Data Backup and Recovery ${e+1}`),"SCALABILITY & ELASTICITY":Array.from({length:3},(s,e)=>`Scalability and Elasticity ${e+1}`),"SECURITY MEASURES":Array.from({length:4},(s,e)=>`Security Measures ${e+1}`),MONITORING:Array.from({length:3},(s,e)=>`Monitoring and Performance ${e+1}`),COMPLIANCE:Array.from({length:3},(s,e)=>`Compliance and Governance ${e+1}`),INTEGRATION:Array.from({length:3},(s,e)=>`Integration and Interoperability ${e+1}`),"DISASTER RECOVERY":Array.from({length:3},(s,e)=>`Disaster Recovery and Business Continuity ${e+1}`)};t=Object.entries(r).map(([s,e])=>({category:s,score:G(e.map(E=>Number(d[E]||0)))})).reduce((s,e)=>s+e.score,0)/Object.keys(r).length}let g=0;if(d){const r={"CHANGE READINESS":Array.from({length:3},(s,e)=>`CHANGE READINESS ${e+1}`),"CHANGE LEADERSHIP":Array.from({length:2},(s,e)=>`CHANGE LEADERSHIP ${e+1}`),"CHANGE COMMUNICATION":Array.from({length:3},(s,e)=>`CHANGE COMMUNICATION ${e+1}`),"IMPACT ASSESSMENT":Array.from({length:3},(s,e)=>`CHANGE IMPACT ASSESSMENT ${e+1}`),"STAKEHOLDER ENGAGEMENT":Array.from({length:3},(s,e)=>`STAKEHOLDER ENGAGEMENT ${e+1}`),"PLANNING & EXECUTION":Array.from({length:3},(s,e)=>`CHANGE PLANNING AND EXECUTION ${e+1}`),TRAINING:Array.from({length:3},(s,e)=>`TRAINING AND DEVELOPMENT ${e+1}`),"RESISTANCE MANAGEMENT":Array.from({length:3},(s,e)=>`Resistance Management ${e+1}`),EVALUATION:Array.from({length:3},(s,e)=>`Evaluation and Continuous Improvement ${e+1}`),SUSTAINABILITY:Array.from({length:3},(s,e)=>`Sustainability and Embedding ${e+1}`),FINANCIAL:Array.from({length:5},(s,e)=>`Costs or Financial ${e+1}`)};g=Object.entries(r).map(([s,e])=>({category:s,score:G(e.map(E=>Number(d[E]||0)))})).reduce((s,e)=>s+e.score,0)/Object.keys(r).length}const T=(f+y+t+g)/4;return{digitalSkills:{percentage:f,data:A.digitalSkills.scores,labels:Array.from({length:10},(r,u)=>`Question ${u+1}`)},techReadiness:{percentage:y,data:h.map(r=>r.average),labels:h.map(r=>r.category)},itReadiness:{percentage:t},changeManagement:{percentage:g},totalScore:T}};function X(){const N=k(),[c,d]=R.useState([]),[A,f]=R.useState({}),[h,b]=R.useState("");R.useEffect(()=>{if(m["Mayors Office"]&&m["IT Office"]&&m["HR Office"]&&m["Other Offices"]){const g=[...m["Mayors Office"],...m["IT Office"],...m["HR Office"],...m["Other Offices"]].reduce((n,l)=>{if(l.Province==="Misor"){const r=l["LGU Name"];n[r]||(n[r]=[]),n[r].push(l)}return n},{}),I=[...Object.entries(g).map(([n,l])=>{const r=q(l);return{name:n,score:Math.round(r.totalScore*100)/100,digitalSkills:Math.round(r.digitalSkills.percentage*100)/100,techReadiness:Math.round(r.techReadiness.percentage*100)/100,itReadiness:Math.round(r.itReadiness.percentage*100)/100,changeManagement:Math.round(r.changeManagement.percentage*100)/100}})].sort((n,l)=>l.score-n.score).map((n,l)=>({...n,rank:l+1}));d(I);const C={labels:["Digital Skills","Tech Readiness","IT Readiness","Change Management","Overall Score"],datasets:I.map((n,l)=>({label:n.name,data:[n.digitalSkills,n.techReadiness,n.itReadiness,n.changeManagement,n.score],borderColor:l%2===0?"#0036C5":"#ECC217",backgroundColor:l%2===0?"#0036C520":"#ECC21720",tension:.1}))};f(C)}},[]);const v=c.filter(t=>t.name.toLowerCase().includes(h.toLowerCase())),M={labels:c.map(t=>t.name),datasets:[{data:c.map(t=>t.score),backgroundColor:c.map((t,g)=>g%2===0?"#0036C5":"#ECC217"),borderWidth:1}]},x=t=>{N(`/misamis-oriental/${t.name}`,{state:{lguName:t.name,score:t.score}})},y=Object.keys(m).reduce((t,g)=>(Array.isArray(m[g])?t[g]=m[g].filter(T=>T.Province==="Misor"):t[g]=m[g],t),{});return a.jsx("div",{className:"min-h-full w-full flex items-center justify-center",children:a.jsxs("div",{className:"p-5 w-[95%] h-[90%] flex flex-col bg-card/25 border border-border rounded-lg",children:[a.jsx("h1",{className:"py-4 px-2 rounded-sm text-center font-bold text-xl mb-4 border text-[#0036C5] border-[#0036C5]",children:"Misamis Oriental Province"}),a.jsxs("div",{className:"flex flex-row space-x-4",children:[a.jsx("div",{className:"w-[30%] border border-gray-200 rounded-lg overflow-hidden",children:a.jsxs("div",{className:"bg-white",children:[a.jsx("div",{className:"flex items-center p-4 border-b border-gray-200",children:a.jsxs("div",{className:"relative flex-grow",children:[a.jsx("input",{type:"text",placeholder:"Search",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg",value:h,onChange:t=>b(t.target.value)}),a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),a.jsxs("div",{className:"grid grid-cols-5 border-b border-gray-200 text-sm font-medium text-gray-700",children:[a.jsx("div",{className:"p-4 col-span-1 flex items-center",children:"Rank"}),a.jsxs("div",{className:"p-4 col-span-2 flex items-center",children:["LGU Name",a.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsxs("div",{className:"p-4 col-span-2 flex items-center",children:["Score (%)",a.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),a.jsx("div",{className:"divide-y divide-gray-200 max-h-[500px] overflow-y-auto",children:v.map(t=>a.jsxs("div",{className:"cursor-pointer grid grid-cols-5 hover:bg-gray-50",onClick:()=>x(t),children:[a.jsx("div",{className:"p-4 col-span-1",children:t.rank}),a.jsx("div",{className:"p-4 col-span-2 truncate",children:t.name}),a.jsx("div",{className:"p-4 col-span-2",children:t.score})]},t.name))})]})}),a.jsxs("div",{className:"w-[70%] space-y-4",children:[a.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg",children:[a.jsx("h2",{className:"text-lg font-medium mb-4",children:"LGUs Assessment Scores"}),a.jsx("div",{className:"h-[300px] flex justify-center",children:a.jsx(Y,{data:M,options:{maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:12}}}}})})]}),a.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg",children:[a.jsx("h2",{className:"text-lg font-medium mb-4",children:"LGUs Assessment Category Scores"}),a.jsx("div",{className:"h-[300px]",children:Object.keys(A).length>0&&a.jsx(K,{data:A,options:{maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(t){return t+"%"}}}},plugins:{legend:{position:"bottom",labels:{boxWidth:12}},tooltip:{callbacks:{label:function(t){return t.dataset.label+": "+t.raw+"%"}}}}}})})]}),a.jsx(W,{data:y,title:"Digital Skills Card Full Width",gridColsBase:1})]})]})]})})}export{X as default};
