import{a as H,b as Y,r as x,j as t}from"./index-e3fade61.js";import{D as v}from"./eReadinessSurveyData-59b02ced.js";const u=({label:o,value:l,span:r})=>t.jsxs("div",{className:`bg-gray-50 p-4 rounded-lg border border-border col-span-${r||1}`,children:[t.jsx("div",{className:"text-sm text-gray-700 mb-1",children:o}),t.jsx("div",{className:"font-bold text-lg",children:l})]}),B=({score:o})=>t.jsxs("div",{className:"w-1/2 flex flex-col items-center justify-center",children:[t.jsx("div",{className:"text-xl font-bold text-[#0036C5] mb-2",children:"Score"}),t.jsxs("div",{className:"relative w-40 h-40",children:[t.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[t.jsx("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"#ecc216",strokeWidth:"8"}),t.jsx("circle",{cx:"80",cy:"80",r:"70",fill:"none",stroke:"#0036C5",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${o/100*439.6} 439.6`})]}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("span",{className:"text-5xl font-bold",style:{color:o>=50?"#0036c6":"#ecc216"},children:[o,"%"]})})]})]}),V=o=>{const l=o.filter(E=>E!=null);if(l.length===0)return 0;const r=l.length*5;return l.reduce((E,N)=>E+N,0)/r*100},j=o=>{const l=o.filter(r=>r!=null);return l.length?l.reduce((r,f)=>r+f,0)/l.length:0},w=o=>(o-1)/5*100,K=(o,l)=>{var y,O,_,k;const r=v["IT Office"].find(s=>s["LGU Name"]===o);let f=v,E=l.map(s=>f[s].filter(e=>e["LGU Name"]===o));if(E=Object.values(E).flat(),console.log("Offices Data:",E),!E.length)return null;const N=E.reduce((s,e)=>{const b=Array.from({length:10},(n,c)=>`Question ${c+1} DigitalSkillsAssessment`);console.log("Adasdas----"),console.log(e);const L=b.map(n=>({question:n,data:e[n],score:w(Number(e[n]||0))})),P={OPTIMISM:Array.from({length:10},(n,c)=>`Optimism ${c+1}`),INNOVATIVENESS:Array.from({length:7},(n,c)=>`Innovativeness ${c+1}`),DISCOMFORT:Array.from({length:10},(n,c)=>`Discomfort ${c+1}`),INSECURITY:Array.from({length:9},(n,c)=>`Insecurity ${c+1}`)},$=Object.entries(P).map(([n,c])=>{const p=c.map(C=>({question:C,score:w(Number(e[C]||0))}));return{category:n,scores:p,average:j(p.map(C=>C.score))}});return s.digitalSkills?(s.digitalSkills.scores=s.digitalSkills.scores.map((n,c)=>({question:n.question,score:n.score+L[c].score})),s.digitalSkills.count++):s.digitalSkills={scores:L,count:1},s.techReadiness?(s.techReadiness.categories=s.techReadiness.categories.map((n,c)=>({category:n.category,scores:n.scores.map((p,C)=>({question:p.question,score:p.score+$[c].scores[C].score})),average:n.average+$[c].average})),s.techReadiness.count++):s.techReadiness={categories:$,count:1},s},{});console.log("Combine Scores:",N);const h={"BASIC IT READINESS":Array.from({length:4},(s,e)=>`BASIC IT READINESS ${e+1}`),"IT GOVERNANCE":Array.from({length:3},(s,e)=>`IT GOVERNANCE FRAMEWORK & POLICIES ${e+1}`),"IT STRATEGY":Array.from({length:3},(s,e)=>`IT STRATEGY AND ALIGNMENT ${e+1}`),"IT POLICIES":Array.from({length:3},(s,e)=>`IT POLICIES AND PROCEDURES ${e+1}`),"RISK MANAGEMENT":Array.from({length:3},(s,e)=>`RISK MANAGEMENT ${e+1}`),"PERFORMANCE MEASUREMENT":Array.from({length:3},(s,e)=>`IT PERFORMANCE MEASUREMENT AND REPORTING ${e+1}`),"IT INVESTMENT MANAGEMENT":Array.from({length:3},(s,e)=>`IT INVESTMENT MANAGEMENT ${e+1}`),"VENDOR MANAGEMENT":Array.from({length:3},(s,e)=>`VENDOR MANAGEMENT ${e+1}`),"IT SECURITY":Array.from({length:3},(s,e)=>`IT SECURITY AND COMPLIANCE ${e+1}`),"ICT ORGANIZATION":Array.from({length:3},(s,e)=>`ICT Organizational Structure and Skills ${e+1}`),"AUDIT & ASSURANCE":Array.from({length:3},(s,e)=>`Audit and Assurance ${e+1}`),NETWORK:Array.from({length:2},(s,e)=>`Network Infrastructure ${e+1}`),STORAGE:Array.from({length:3},(s,e)=>`Servers and Storage ${e+1}`),VIRTUALIZATION:Array.from({length:3},(s,e)=>`Virtualization ${e+1}`),BACKUP:Array.from({length:3},(s,e)=>`Data Backup and Recovery ${e+1}`),"SCALABILITY & ELASTICITY":Array.from({length:3},(s,e)=>`Scalability and Elasticity ${e+1}`),"SECURITY MEASURES":Array.from({length:4},(s,e)=>`Security Measures ${e+1}`),MONITORING:Array.from({length:3},(s,e)=>`Monitoring and Performance ${e+1}`),COMPLIANCE:Array.from({length:3},(s,e)=>`Compliance and Governance ${e+1}`),INTEGRATION:Array.from({length:3},(s,e)=>`Integration and Interoperability ${e+1}`),"DISASTER RECOVERY":Array.from({length:3},(s,e)=>`Disaster Recovery and Business Continuity ${e+1}`)},M=Object.entries(h).map(([s,e])=>{const b=e.map(P=>Number((r==null?void 0:r[P])||0)),L=V(b);return{category:s,score:L}});let G=0;M.map(s=>G+=s.score);const U={"CHANGE READINESS":Array.from({length:3},(s,e)=>`CHANGE READINESS ${e+1}`),"CHANGE LEADERSHIP":Array.from({length:2},(s,e)=>`CHANGE LEADERSHIP ${e+1}`),"CHANGE COMMUNICATION":Array.from({length:3},(s,e)=>`CHANGE COMMUNICATION ${e+1}`),"IMPACT ASSESSMENT":Array.from({length:3},(s,e)=>`CHANGE IMPACT ASSESSMENT ${e+1}`),"STAKEHOLDER ENGAGEMENT":Array.from({length:3},(s,e)=>`STAKEHOLDER ENGAGEMENT ${e+1}`),"PLANNING & EXECUTION":Array.from({length:3},(s,e)=>`CHANGE PLANNING AND EXECUTION ${e+1}`),TRAINING:Array.from({length:3},(s,e)=>`TRAINING AND DEVELOPMENT ${e+1}`),"RESISTANCE MANAGEMENT":Array.from({length:3},(s,e)=>`Resistance Management ${e+1}`),EVALUATION:Array.from({length:3},(s,e)=>`Evaluation and Continuous Improvement ${e+1}`),SUSTAINABILITY:Array.from({length:3},(s,e)=>`Sustainability and Embedding ${e+1}`),FINANCIAL:Array.from({length:5},(s,e)=>`Costs or Financial ${e+1}`)},I=Object.entries(U).map(([s,e])=>({category:s,score:V(e.map(b=>Number((r==null?void 0:r[b])||0)))})),R=j(N.digitalSkills.scores.map(s=>s.score/N.digitalSkills.count));console.log("digitalSkillsAverage :",R);const g=N.techReadiness.categories.map(s=>({...s,average:s.average/N.techReadiness.count,scores:s.scores.map(e=>({...e,score:e.score/N.techReadiness.count}))}));console.log("categoryAverages :",g);const a=((y=g.find(s=>s.category==="OPTIMISM"))==null?void 0:y.average)||0,m=((O=g.find(s=>s.category==="INNOVATIVENESS"))==null?void 0:O.average)||0,d=((_=g.find(s=>s.category==="DISCOMFORT"))==null?void 0:_.average)||0,A=((k=g.find(s=>s.category==="INSECURITY"))==null?void 0:k.average)||0,T=(a+m+(100-d)+(100-A))/4,i=j(M.map(s=>s.score)),S=j(I.map(s=>s.score)),D=(R+T+i+S)/4;return{digitalSkills:{scores:N.digitalSkills.scores.map(s=>({question:s.question,score:s.score/N.digitalSkills.count})),average:R},technologyReadiness:{categories:g,average:T},itReadiness:{categories:M,average:i},changeManagement:{categories:I,average:S},totalScore:Math.round(D*100)/100,componentScores:{digitalSkills:Math.round(R*100)/100,techReadiness:Math.round(T*100)/100,itReadiness:Math.round(i*100)/100,changeManagement:Math.round(S*100)/100}}},F=[{title:"DIGITAL SKILLS ASSESSMENT",data:["Basic computer skill","Basic Internet searching","General computer or office productivity software use","Use of collaborative platforms","Use of communication apps","Use of social media","Content creation","Cybersecurity awareness","Programming, web, and app dev...","Digital design and data vi..."]},{title:"TECHNOLOGY READINESS INDEX",data:["OPTIMISM (10 questions)","INNOVATIVENESS (7 questions)","DISCOMFORT (10 questions)","INSECURITY (9 questions)"]},{title:"IT READINESS ASSESSMENT",data:["BASIC IT READINESS","IT GOVERNANCE FRAMEWORK & POLICIES","IT STRATEGY AND ALIGNMENT","IT POLICIES AND PROCEDURES","RISK MANAGEMENT","IT PERFORMANCE MEASUREMENT AND REPORTING","IT INVESTMENT MANAGEMENT","VENDOR MANAGEMENT","IT SECURITY AND COMPLIANCE","ICT ORGANIZATIONAL STRUCTURE AND SKILLS","AUDIT AND ASSURANCE","NETWORK INFRASTRUCTURE","SERVERS AND STORAGE","VIRTUALIZATION","DATA BACKUP AND RECOVERY","SCALABILITY AND ELASTICITY","SECURITY MEASURES","MONITORING AND PERFORMANCE","COMPLIANCE AND GOVERNANCE","INTEGRATION AND INTEROPERABILITY","DISASTER RECOVERY AND BUSINESS CONTINUITY"]},{title:"ICT CHANGE MANAGEMENT",data:["CHANGE READINESS","CHANGE LEADERSHIP","CHANGE COMMUNICATION","CHANGE IMPACT ASSESSMENT","STAKEHOLDER ENGAGEMENT","CHANGE PLANNING AND EXECUTION","TRAINING AND DEVELOPMENT","RESISTANCE MANAGEMENT","EVALUATION AND CONTINUOUS IMPROVEMENT","SUSTAINABILITY AND EMBEDDING","COSTS OR FINANCIAL"]}];function X(){const{lguName:o}=H(),l=Y(),[r,f]=x.useState(null),[E,N]=x.useState(0),[h,M]=x.useState("About"),[G,U]=x.useState([]),[I,R]=x.useState(null);if(x.useEffect(()=>{var m,d;(m=l.state)!=null&&m.score&&N(l.state.score);const a=o||((d=l.state)==null?void 0:d.lguName);if(a&&v){const A=v.Info.find(i=>{var S;return((S=i["LGU Name"])==null?void 0:S.toUpperCase())===a.toUpperCase()}),T=v["Mayors Office"].find(i=>{var S;return((S=i["LGU Name"])==null?void 0:S.toUpperCase())===a.toUpperCase()});if(A){f({...A,...T});const i=K(a,["Mayors Office","Other Offices","HR Office","IT Office"]);i&&(R(i),N(i.totalScore),console.log("Component Scores:",i.componentScores))}}},[o,l]),!r)return t.jsx("div",{className:"min-h-full w-full flex items-center justify-center",children:t.jsx("div",{className:"p-5 w-[95%] flex flex-col bg-card/25 border border-border rounded-lg",children:t.jsx("h1",{className:"py-4 px-2 text-center font-bold text-xl border text-[#0036C5] border-[#0036C5]",children:"LGU Information Not Found"})})});console.log();const g=()=>t.jsx("div",{className:"space-y-4",children:I&&F.map(a=>t.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>{U(m=>m.includes(a.title)?m.filter(d=>d!==a.title):[...m,a.title])},className:"w-full p-4 flex justify-between items-center bg-[#0036C5] text-white hover:bg-[#002799] transition-colors",children:[t.jsx("h3",{className:"text-xl font-semibold",children:a.title}),t.jsx("span",{className:"text-2xl",children:G.includes(a.title)?"−":"+"})]}),G.includes(a.title)&&t.jsx("ul",{className:"p-4 bg-white space-y-2",children:a.data.map((m,d)=>{var T,i,S,D,y,O;let A;switch(a.title){case"DIGITAL SKILLS ASSESSMENT":A=(T=I.digitalSkills.scores[d])==null?void 0:T.score;break;case"TECHNOLOGY READINESS INDEX":A=(i=I.technologyReadiness.categories[d])==null?void 0:i.average;break;case"IT READINESS ASSESSMENT":A=(D=(S=I.itReadiness)==null?void 0:S.categories[d])==null?void 0:D.score;break;case"ICT CHANGE MANAGEMENT":A=(O=(y=I.changeManagement)==null?void 0:y.categories[d])==null?void 0:O.score;break;default:A=0}return t.jsxs("li",{className:"flex items-center justify-between text-gray-700 hover:text-[#0036C5] transition-colors p-2",children:[t.jsx("span",{children:m}),t.jsxs("span",{className:"font-semibold",children:[A==null?void 0:A.toFixed(2),"%"]})]},d)})})]},a.title))});return t.jsx("div",{className:"min-h-full w-full py-10 flex items-center justify-center",children:t.jsxs("div",{className:"p-5 h-full  w-[95%] flex flex-col bg-card/25 border border-border border-b-0 rounded-lg",children:[t.jsx("h1",{className:"py-4 px-2 text-center font-bold text-xl mb-4 border text-[#0036C5] border-[#0036C5]",children:`${r["LGU Name"]}, ${r.Province}`}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:t.jsxs("div",{className:"flex relative  justify-between md:items-end items-center md:flex-col",children:[t.jsx("div",{className:"w-[80%] md:w-full ",children:t.jsxs("div",{className:"grid grid-cols-3  gap-6",children:[t.jsx(u,{span:"2",label:"Municipality",value:r["LGU Name"]}),t.jsx(u,{label:"Income Class",value:r["Income Class"]}),t.jsx(u,{label:"Mayor",value:r.Mayor}),t.jsx(u,{label:"Vice Mayor",value:r["Vice Mayor"]}),t.jsx(u,{label:"Population",value:r["No. of Population"]}),t.jsx(u,{label:"Barangays",value:r["No. of Barangays"]}),t.jsx("div",{children:t.jsx(u,{label:"Location",value:`${r.Latitude}° N, ${r.Longitude}° E`})})]})}),t.jsxs("h1",{className:" absolute right-0 bottom-0 md:left-0 font-black text-6xl text-[#a8b6cb]",children:[r["LGU Name"]," "]}),t.jsx(B,{score:Math.round(E)})]})}),t.jsx("div",{className:"border-b w-[50%] border-gray-200",children:t.jsx("nav",{className:"flex",children:["About","Assessment","Attachments"].map(a=>t.jsx("button",{onClick:()=>M(a),className:`mr-4 md:mr-8 py-3 md:py-4 px-1 text-sm md:text-base ${h===a?"border-b-2 border-red-500 text-red-500 font-medium":"text-gray-500 hover:text-gray-700 border-transparent"}`,children:a},a))})}),t.jsxs("div",{className:"py-4 md:py-6 w-[50%] md:w-full",children:[h==="About"&&t.jsx("div",{className:"flex flex-col md:flex-row",children:t.jsx("div",{className:"w-full md:w-[70%] pr-0 md:pr-6",children:t.jsx("p",{className:"mb-4 text-sm md:text-base",children:r.descriptioon})})}),h==="Assessment"&&g(),h==="Attachments"&&t.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Attachments"})]})]})})}export{X as default};
